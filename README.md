# awsotp

Generates the same MFA code that would be generated by Google Authenticator.
It reads the value of `mfa_secret` from a profile of the AWS credentials file
and return the 6 character code used in MFA authentication. The code is also
placed into the clipboard.

It takes `--profile` and `--config` as arguments, so although it uses the AWS
credentials file by default, it can work with any .ini style configuration.

Compatible with both Python 2 and 3.

### Setup
#### The script
Needs the `onetimepass` and `pyperclip` modules. Both of them can be installed
using pip. Both are on GitHub.

`onetimepass` can be found here: https://github.com/tadeck/onetimepass

`pyperclip` can be found here: https://github.com/asweigart/pyperclip

#### The config file
When a new MFA virtual device is being set up in AWS, a screen pops up, like
the one below. What we need is the 'secret key for manual configuration'.
The QR code actually translates into an otpauth URL containing that secret key.

![MFA Activation](http://www.neant.ro/wp-content/uploads/2016/03/aws_mfa_activation-1.png)

The config file (~/.aws/credentials) section (profile) for the above image 
should looks similar to:
```
[default]
region = us-east-1
aws_access_key_id = BANANANANANANANPHONE
aws_secret_access_key = OhYesOfCourseThisIsARealSecretStringHere
mfa_secret = B25ARDS3XOTDLKVYBSCQJELZE3Z5DGJV7NIBBRXHUD3TKK5QVEP53JW5US4EYSXH
```

